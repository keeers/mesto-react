(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(6),o=a.n(c),s=(a(14),a(9)),r=a(2),u=a.p+"static/media/header__logo.bad0f45a.svg",l=a(0);var p=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("a",{className:"link",href:"#",target:"_blank",children:Object(l.jsx)("img",{src:u,className:"header__logo",alt:"\u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"})})})},d=i.a.createContext(),_=function(e){var t=e.id,a=e.link,n=e.name,c=e.likes,o=e.owner,s=e.onDeleteCard,r=e.onCardClick,u=e.onCardLike,p=i.a.useContext(d),_=p._id===o._id,b=c.some((function(e){return e._id===p._id}));function h(){u({likes:c,id:t})}function j(){s(t)}return Object(l.jsxs)("article",{className:"card",children:[Object(l.jsx)("img",{className:"card__image",src:a,alt:n,onClick:function(){r({cardLink:a,cardName:n})}}),_?Object(l.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:"card__delete-btn",onClick:j}):Object(l.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:"card__delete-btn card__delete-btn_disabled",disabled:!0,onClick:j}),Object(l.jsxs)("div",{className:"card__rectangle",children:[Object(l.jsx)("h2",{className:"card__title",children:n}),Object(l.jsxs)("div",{className:"card__like-section",children:[b?Object(l.jsx)("button",{type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",className:"card__like-btn card__like-btn_is-active",onClick:h}):Object(l.jsx)("button",{type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",className:"card__like-btn",onClick:h}),Object(l.jsx)("p",{className:"card__like",children:c.length})]})]})]})},b=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,c=e.onDeleteCard,o=e.onCardClick,s=e.initialCards,r=e.onCardLike,u=e.onCardDelete,p=i.a.useContext(d);return Object(l.jsxs)("main",{className:"content",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsx)("div",{className:"profile__avatar-box",onClick:n,children:Object(l.jsx)("img",{className:"profile__avatar",src:p.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:"profile__name",children:p.name}),Object(l.jsx)("p",{className:"profile__job",children:p.about})]}),Object(l.jsx)("button",{type:"button","aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",className:"profile__edit-btn",onClick:t})]}),Object(l.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-btn",onClick:a})]}),Object(l.jsx)("section",{className:"cards",children:s.map((function(e){var t=e._id,a=e.link,n=e.name,i=e.likes,s=e.owner;return Object(l.jsx)(_,{id:t,link:a,name:n,likes:i,owner:s,onDeleteCard:c,onCardClick:o,onCardLike:r,onCardDelete:u},t)}))})]})};var h=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa92021 Mesto Russia"})})},j=function(e){var t=e.card,a=e.isOpen,n=e.onClose;return Object(l.jsx)("div",{className:"popup popup_type_image ".concat(a&&"popup_is-opened"),children:Object(l.jsxs)("div",{className:"popup__viewbox",children:[Object(l.jsx)("button",{type:"button",className:"popup__close-btn popup__close-btn_type_s","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:n}),Object(l.jsxs)("figure",{className:"popup__figure",children:[Object(l.jsx)("img",{className:"popup__image",src:t.cardLink,alt:t.cardName}),Object(l.jsx)("figcaption",{className:"popup__caption",children:t.cardName})]})]})})},m=a(7),f=a(8),O=(document.querySelector(".profile__edit-btn"),document.querySelector(".profile__add-btn"),document.querySelector(".popup__input_type_name"),document.querySelector(".popup__input_type_job"),document.querySelector(".profile__avatar-box"),document.querySelector(".popup__save-btn_type_edit"),document.querySelector(".popup__save-btn_type_add"),document.querySelector(".popup__save-btn_type_edit-avatar"),new(function(){function e(t){Object(m.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(f.a)(e,[{key:"_getResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]}}).then((function(t){return e._getResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]}}).then((function(t){return e._getResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._getResponse(e)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._getResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]}}).then((function(e){return t._getResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]}}).then((function(e){return a._getResponse(e)}))}},{key:"setAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._headers.authorization,"Content-Type":this._headers["Content-Type"]},body:JSON.stringify({avatar:e})}).then((function(e){return t._getResponse(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"7abd72de-4e29-415a-9784-32653cfffc2b","Content-Type":"application/json"}})),v=function(e){var t=e.type,a=e.name,n=e.title,i=e.button,c=e.isOpen,o=e.onClose,s=e.onSubmit,r=e.isValid,u=e.children;return Object(l.jsx)("div",{className:"popup popup_type_".concat(t," ").concat(c&&"popup_is-opened"),children:Object(l.jsxs)("form",{className:"popup__container",name:a,noValidate:!0,onSubmit:s,children:[Object(l.jsx)("button",{type:"button",className:"popup__close-btn","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:o}),Object(l.jsx)("h2",{className:"popup__title",children:n}),u,Object(l.jsx)("button",{type:"submit",className:"popup__save-btn ".concat(!r&&"popup__save-btn_disabled"),disabled:!r&&!0,children:i})]})})},C=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,c=i.a.useState(""),o=Object(r.a)(c,2),s=o[0],u=o[1],p=i.a.useState(""),_=Object(r.a)(p,2),b=_[0],h=_[1],j=i.a.useContext(d),m=i.a.useState(!1),f=Object(r.a)(m,2),O=f[0],C=f[1],x=i.a.useState(!1),y=Object(r.a)(x,2),g=y[0],N=y[1],k=i.a.useState(""),S=Object(r.a)(k,2),T=S[0],L=S[1],U=i.a.useState(""),E=Object(r.a)(U,2),z=E[0],D=E[1],I=i.a.useState(!1),P=Object(r.a)(I,2),q=P[0],A=P[1];return i.a.useEffect((function(){u(j.name),h(j.about),C(!0),N(!0)}),[j,t]),i.a.useEffect((function(){A(!(!g||!O))}),[g,O]),Object(l.jsxs)(v,{type:"edit-profile",name:"editForm",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:s,about:b})},isValid:q,children:[Object(l.jsxs)("div",{className:"popup__section",children:[Object(l.jsx)("input",{type:"text",className:"popup__input popup__input_type_name",name:"nameInput",placeholder:"\u0418\u043c\u044f",required:!0,minLength:"2",maxLength:"40",value:s||"",onChange:function(e){var t=e.target,a=t.validity.valid;u(e.target.value),C(!!a),L(a?"":t.validationMessage)}}),Object(l.jsx)("span",{className:"popup__input-error ".concat(!q&&"popup__input-error_active"),children:T})]}),Object(l.jsxs)("div",{className:"popup__section",children:[Object(l.jsx)("input",{type:"text",className:"popup__input popup__input_type_job",name:"jobInput",placeholder:"\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",required:!0,minLength:"2",maxLength:"200",value:b||"",onChange:function(e){var t=e.target,a=t.validity.valid;h(e.target.value),N(!!a),D(a?"":t.validationMessage)}}),Object(l.jsx)("span",{className:"popup__input-error ".concat(!q&&"popup__input-error_active"),children:z})]})]})},x=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,c=i.a.useState(""),o=Object(r.a)(c,2),s=o[0],u=o[1],p=i.a.useState(!1),d=Object(r.a)(p,2),_=d[0],b=d[1],h=i.a.useState(""),j=Object(r.a)(h,2),m=j[0],f=j[1];return i.a.useEffect((function(){u(""),b(!1),f("")}),[t]),Object(l.jsx)(v,{type:"edit-avatar",name:"editAvatarForm",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",button:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:a,isValid:_,onSubmit:function(e){e.preventDefault(),n({avatar:s})},children:Object(l.jsxs)("div",{className:"popup__section",children:[Object(l.jsx)("input",{type:"url",className:"popup__input popup__input_type_link",name:"linkInput",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onChange:function(e){var t=e.target,a=t.validity.valid;u(t.value),b(!!a),f(a?"":t.validationMessage)},value:s||""}),Object(l.jsx)("span",{className:"popup__input-error ".concat(!_&&"popup__input-error_active"),children:m})]})})},y=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,c=i.a.useState(""),o=Object(r.a)(c,2),s=o[0],u=o[1],p=i.a.useState(""),d=Object(r.a)(p,2),_=d[0],b=d[1],h=i.a.useState(!1),j=Object(r.a)(h,2),m=j[0],f=j[1],O=i.a.useState(!1),C=Object(r.a)(O,2),x=C[0],y=C[1],g=i.a.useState(""),N=Object(r.a)(g,2),k=N[0],S=N[1],T=i.a.useState(""),L=Object(r.a)(T,2),U=L[0],E=L[1],z=i.a.useState(!1),D=Object(r.a)(z,2),I=D[0],P=D[1];return i.a.useEffect((function(){P(!(!x||!m))}),[x,m]),i.a.useEffect((function(){u(""),b(""),f(!1),S(""),y(!1),E("")}),[t]),Object(l.jsxs)(v,{type:"add-card",name:"addForm",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",button:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:s,link:_})},isValid:I,children:[Object(l.jsxs)("div",{className:"popup__section",children:[Object(l.jsx)("input",{type:"text",className:"popup__input popup__input_type_title",name:"titleInput",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",onChange:function(e){var t=e.target,a=t.validity.valid;u(t.value),f(!!a),S(a?"":t.validationMessage)},value:s||""}),Object(l.jsx)("span",{className:"popup__input-error ".concat(!I&&"popup__input-error_active"),children:k})]}),Object(l.jsxs)("div",{className:"popup__section",children:[Object(l.jsx)("input",{type:"url",className:"popup__input popup__input_type_link",name:"linkInput",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",onChange:function(e){var t=e.target,a=t.validity.valid;b(t.value),y(!!a),E(a?"":t.validationMessage)},value:_||""}),Object(l.jsx)("span",{className:"popup__input-error ".concat(!I&&"popup__input-error_active"),children:U})]})]})},g=function(e){var t=e.isOpen,a=e.onClose,n=e.onCardDeleting,i=e.deletingCardId;return Object(l.jsx)(v,{type:"delete-card",name:"deleteCardForm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",button:"\u0414\u0430",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n(i)},isValid:!0})};var N=function(){var e=i.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],c=i.a.useState(!1),o=Object(r.a)(c,2),u=o[0],_=o[1],m=i.a.useState(!1),f=Object(r.a)(m,2),v=f[0],N=f[1],k=i.a.useState(!1),S=Object(r.a)(k,2),T=S[0],L=S[1],U=i.a.useState(!1),E=Object(r.a)(U,2),z=E[0],D=E[1],I=i.a.useState({cardLink:"",cardName:""}),P=Object(r.a)(I,2),q=P[0],A=P[1],w=i.a.useState({}),R=Object(r.a)(w,2),F=R[0],M=R[1],V=i.a.useState([]),J=Object(r.a)(V,2),B=J[0],H=J[1],G=i.a.useState(""),K=Object(r.a)(G,2),Q=K[0],W=K[1];function X(){_(!1),n(!1),N(!1),L(!1),D(!1),A({cardLink:"",cardName:""})}return i.a.useEffect((function(){Promise.all([O.getUserInfo(),O.getInitialCards()]).then((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];M(a),H(n)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsx)("div",{className:"page",children:Object(l.jsxs)(d.Provider,{value:F,children:[Object(l.jsx)(p,{}),Object(l.jsx)(b,{onEditProfile:function(){n(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){N(!0)},onDeleteCard:function(e){L(!0),W(e)},onCardClick:function(e){D(!0),A({cardLink:e.cardLink,cardName:e.cardName})},initialCards:B,onCardLike:function(e){var t=e.likes,a=e.id,n=t.some((function(e){return e._id===F._id}));O.changeLikeCardStatus(a,n).then((function(e){H((function(t){return t.map((function(t){return t._id===a?e:t}))}))})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(C,{isOpen:a,onClose:X,onUpdateUser:function(e){O.setUserInfo(e).then((function(e){M(e),n(!1)})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(x,{isOpen:v,onClose:X,onUpdateAvatar:function(e){var t=e.avatar;O.setAvatar(t).then((function(e){M(e),N(!1)})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(y,{isOpen:u,onClose:X,onAddPlace:function(e){O.addNewCard(e).then((function(e){H([e].concat(Object(s.a)(B))),_(!1)})).catch((function(e){return console.log(e)}))}}),Object(l.jsx)(g,{isOpen:T,onClose:X,onCardDeleting:function(e){O.deleteCard(e).then((function(){var t=B.filter((function(t){return t._id!==e}));H(t),L(!1),W("")})).catch((function(e){return console.log(e)}))},deletingCardId:Q}),Object(l.jsx)(j,{card:q,isOpen:z,onClose:X}),Object(l.jsx)(h,{})]})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),c(e),o(e)}))};o.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.c2a9d9df.chunk.js.map